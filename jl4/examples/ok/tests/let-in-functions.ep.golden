-- LET...IN function tests: parameterized bindings

-- Single parameter function
DECIDE testSingleParam x IS
  LET
    double n IS n TIMES 2
  IN double x

-- Two parameter function
DECIDE testTwoParams x y IS
  LET
    add a b IS a PLUS b
  IN add x y

-- Multiple functions
DECIDE testMultipleFunctions x IS
  LET
    double n IS n TIMES 2
    triple n IS n TIMES 3
  IN double x PLUS triple x

-- Forward reference between functions
DECIDE testFunctionChain x IS
  LET
    f n IS g n PLUS 1
    g n IS n TIMES 2
  IN f x

-- Self-recursive function (factorial)
DECIDE testFactorial n IS
  LET
    fact x IS IF x EQUALS 0 THEN 1 ELSE x TIMES fact (x MINUS 1)
  IN fact n

-- Self-recursive function (fibonacci)
DECIDE testFibonacci n IS
  LET
    fib x IS IF x EQUALS 0 THEN 0 ELSE IF x EQUALS 1 THEN 1 ELSE fib (x MINUS 1) PLUS fib (x MINUS 2)
  IN fib n
