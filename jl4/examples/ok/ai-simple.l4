-- Simple working example: Query OpenRouter from L4
-- This demonstrates basic LLM querying using L4's built-in HTTP capabilities

-- Basic query using OpenRouter (requires OPENROUTER_API_KEY environment variable)
DECIDE simpleAIQuery IS
  CONSIDER ENV "OPENROUTER_API_KEY"
    WHEN JUST apiKey THEN
      POST
        "https://openrouter.ai/api/v1/chat/completions"
        (CONCAT
          "Content-Type: application/json\n",
          "Authorization: Bearer ", apiKey, "\n",
          "HTTP-Referer: https://l4-lang.org")
        "{\"model\": \"openai/gpt-3.5-turbo\", \"messages\": [{\"role\": \"user\", \"content\": \"What is 2+2?\"}], \"max_tokens\": 50}"
    WHEN NOTHING THEN
      "ERROR: OPENROUTER_API_KEY not set"

-- To run this, set your API key and uncomment the EVAL line:
-- export OPENROUTER_API_KEY="sk-or-v1-..."
-- #EVAL simpleAIQuery
